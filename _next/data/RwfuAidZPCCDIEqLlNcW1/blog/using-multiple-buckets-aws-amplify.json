{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var c=Object.create;var i=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var d=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty;var n=a=>i(a,\"__esModule\",{value:!0});var u=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),f=(a,e)=>{n(a);for(var s in e)i(a,s,{get:e[s],enumerable:!0})},g=(a,e,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let o of m(e))!h.call(a,o)&&o!==\"default\"&&i(a,o,{get:()=>e[o],enumerable:!(s=p(e,o))||s.enumerable});return a},y=a=>g(n(i(a!=null?c(d(a)):{},\"default\",a&&a.__esModule&&\"default\"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a);var l=u((v,r)=>{r.exports=_jsx_runtime});var A={};f(A,{default:()=>k,frontmatter:()=>b});var t=y(l()),b={title:\"Using Multiple Buckets AWS Amplify\",date:\"2020-05-20\",tags:[\"amplify\",\"s3-bucket\",\"aws\"],draft:!1,summary:\"From the Amplify documentation, we can consider that AWS Amplify is a development platform for building secure, scalable mobile and web\\u2026\"};function w(a){let e=Object.assign({h1:\"h1\",a:\"a\",span:\"span\",p:\"p\",strong:\"strong\",img:\"img\",em:\"em\",blockquote:\"blockquote\"},a.components),{wrapper:s}=e,o=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.h1,{id:\"using-multiple-buckets-aws-amplify\",children:[(0,t.jsx)(e.a,{href:\"#using-multiple-buckets-aws-amplify\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,t.jsx)(e.span,{className:\"icon icon-link\"})}),\"Using Multiple Buckets AWS Amplify\"]}),`\n`,(0,t.jsx)(e.p,{children:\"AWS Amplify Logo\"}),`\n`,(0,t.jsx)(e.p,{children:\"From the Amplify documentation, we can consider that AWS Amplify is a development platform for building secure, scalable mobile and web applications. It makes it easy for you to authenticate users, securely store data and user metadata, authorize selective access to data, integrate machine learning, analyze application metrics, and execute server-side code. Amplify covers the complete mobile application development workflow from version control, code testing, to production deployment, and it easily scales with your business from thousands of users to tens of millions.\"}),`\n`,(0,t.jsx)(e.p,{children:\"Amplify provides a set of features such as Auth, Analytics, API (GraphQL and REST), Interactions, Predictions, PubSub, Storage, Push Notifications, and XR that enable you to build feature-rich serverless applications powered by AWS services.\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"One of these amazing features is the \",(0,t.jsx)(e.a,{href:\"https://docs.amplify.aws/lib/storage/getting-started/q/platform/js\",children:\"**Storage\"}),\"** one where Amplify use S3 Service to store our files.\"]}),`\n`,(0,t.jsxs)(e.p,{children:[\"From the \",(0,t.jsx)(e.a,{href:\"https://docs.amplify.aws/lib/storage/getting-started/q/platform/js#manual-setup-import-storage-bucket\",children:\"Amplify documentation\"}),\", we can easily set up the \",(0,t.jsx)(e.strong,{children:\"Storage\"}),\" module just doing the setup and insert the bucket on the \",(0,t.jsx)(e.strong,{children:\"aws-exports.js,\"}),\" or we can only use the \",(0,t.jsx)(e.a,{href:\"https://docs.amplify.aws/lib/storage/getting-started/q/platform/js#automated-setup-create-storage-bucket\",children:\"Amplify CLI\"}),\".\"]}),`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/4096/1*TGFrvwUSuB8SMuaFh8ru9w.png\",alt:\"https://docs.amplify.aws/lib/storage/getting-started/q/platform/js#manual-setup-import-storage-bucket\"}),(0,t.jsx)(e.em,{children:(0,t.jsx)(e.a,{href:\"https://docs.amplify.aws/lib/storage/getting-started/q/platform/js#manual-setup-import-storage-bucket\",children:\"https://docs.amplify.aws/lib/storage/getting-started/q/platform/js#manual-setup-import-storage-bucket\"})})]}),`\n`,(0,t.jsx)(e.p,{children:\"As we can see, the documentation shows that the bucket name is mandatory and we can only define one.\"}),`\n`,(0,t.jsx)(e.p,{children:\"So if we want to use the Amplify modules to upload or download files from more than one bucket we start facing some problems because we have just one bucket configured.\"}),`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/5384/1*OaX89AxEY1lWu6DGeUTLcw.png\",alt:\"https://docs.amplify.aws/lib/storage/upload/q/platform/js\"}),(0,t.jsx)(e.em,{children:(0,t.jsx)(e.a,{href:\"https://docs.amplify.aws/lib/storage/upload/q/platform/js\",children:\"https://docs.amplify.aws/lib/storage/upload/q/platform/js\"})})]}),`\n`,(0,t.jsx)(e.p,{children:\"I started reading the Amplify documentation to find a way to solve this problem. I couldn\\u2019t find any way that could help me use multiple buckets in the same application.\"}),`\n`,(0,t.jsx)(e.p,{children:\"After spending a few hours looking inside the source code of the library, I found a config object that is passed to the function and exposes several parameters interpreted by the provider. One of those parameters is the bucket.\"}),`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/7536/1*6HmaJE2CULUp18LMsf69yA.png\",alt:\"https://github.com/aws-amplify/amplify-js/blob/master/packages/storage/src/Storage.ts\"}),(0,t.jsx)(e.em,{children:(0,t.jsx)(e.a,{href:\"https://github.com/aws-amplify/amplify-js/blob/master/packages/storage/src/Storage.ts\",children:\"https://github.com/aws-amplify/amplify-js/blob/master/packages/storage/src/Storage.ts\"})})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"The S3 Provider that Amplify is using has many other parameters that you can use and is not provided by the documentation. If you want to check it out, you can find all the parameters in the \",(0,t.jsx)(e.a,{href:\"https://github.com/aws-amplify/amplify-js/blob/master/packages/storage/src/providers/AWSS3Provider.ts\",children:\"source code\"}),\".\"]}),`\n`,(0,t.jsx)(e.p,{children:\"After adding the object and entering the bucket name I was able to upload it to my custom bucket.\"}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/5384/1*PVFMki2IqoMuCJ7GhkPpug.png\",alt:\"\"})}),`\n`,(0,t.jsxs)(e.blockquote,{children:[`\n`,(0,t.jsxs)(e.p,{children:[\"If you created your bucket directly on the console, you might need to enter some security policies. You can follow the \",(0,t.jsx)(e.a,{href:\"https://docs.amplify.aws/lib/storage/getting-started/q/platform/js#using-amazon-s3\",children:\"official documentation\"}),\" to do this.\"]}),`\n`]}),`\n`,(0,t.jsx)(e.p,{children:\"I don\\u2019t know why the official Amplify documentation did not cover, I hope that in the future they will be able to tidy up the documentation and make it more complete so that people who are starting to use it have easier setup. I hope you enjoyed it, leave your comment below if you have any questions.\"}),`\n`,(0,t.jsx)(e.p,{children:\"Cheers.\"})]});return s?(0,t.jsx)(s,Object.assign({},a,{children:o})):o}var k=w;return A;})();\n;return Component.default;","frontMatter":{"readingTime":{"text":"3 min read","minutes":2.47,"time":148200,"words":494},"slug":"using-multiple-buckets-aws-amplify","fileName":"using-multiple-buckets-aws-amplify.mdx","title":"Using Multiple Buckets AWS Amplify","date":"2020-05-20","tags":["amplify","s3-bucket","aws"],"draft":false,"summary":"From the Amplify documentation, we can consider that AWS Amplify is a development platform for building secure, scalable mobile and webâ€¦"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.605,"time":36300,"words":121},"slug":["default"],"fileName":"default.md","name":"Bruno Valenga","avatar":"/static/images/avatar.jpg","occupation":"DevOps Engineer","company":"DNX Solutions","email":"brunodasilvalenga@gmail.com","linkedin":"https://www.linkedin.com/in/bruno-da-silva-valenga","github":"https://github.com/brunodasilvalenga","instagram":"https://instagram.com/brunodasilvalenga","devdotto":"https://dev.to/brunodasilvalenga","medium":"https://medium.com/@brunodasilvalenga"}],"prev":{"title":"Multi developer environments on AWS using Gitlab + Terraform + Serverless + React","date":"2020-05-06","tags":["serverless","gitlab","terraform","react","aws"],"draft":false,"summary":"How you can deploy your applications and separate them by developer using Terraform and Gitlab CI.","slug":"multi-developer-environments-on-aws-using-gitlab-terraform-serverless-react"},"next":null},"__N_SSG":true}