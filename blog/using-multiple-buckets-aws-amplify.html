<!DOCTYPE html><html lang="en"><head><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" content="#000000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&amp;display=swap"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><title>Using Multiple Buckets AWS Amplify</title><meta name="robots" content="follow, index"/><meta name="description" content="From the Amplify documentation, we can consider that AWS Amplify is a development platform for building secure, scalable mobile and web…"/><meta property="og:url" content="brunodasilvalenga.github.io/blog/using-multiple-buckets-aws-amplify"/><meta property="og:type" content="article"/><meta property="og:site_name" content="Blog"/><meta property="og:description" content="From the Amplify documentation, we can consider that AWS Amplify is a development platform for building secure, scalable mobile and web…"/><meta property="og:title" content="Using Multiple Buckets AWS Amplify"/><meta property="og:image" content="brunodasilvalenga.github.io/static/images/twitter-card.png"/><meta property="article:published_time" content="2020-05-20T00:00:00.000Z"/><link rel="canonical" href="brunodasilvalenga.github.io/blog/using-multiple-buckets-aws-amplify"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "brunodasilvalenga.github.io/blog/using-multiple-buckets-aws-amplify"
  },
  "headline": "Using Multiple Buckets AWS Amplify",
  "image": [
    {
      "@type": "ImageObject",
      "url": "brunodasilvalenga.github.io/static/images/twitter-card.png"
    }
  ],
  "datePublished": "2020-05-20T00:00:00.000Z",
  "dateModified": "2020-05-20T00:00:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "Bruno Valenga"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "Bruno da Silva Valenga",
    "logo": {
      "@type": "ImageObject",
      "url": "brunodasilvalenga.github.io/static/images/logo.png"
    }
  },
  "description": "From the Amplify documentation, we can consider that AWS Amplify is a development platform for building secure, scalable mobile and web…"
}</script><meta name="next-head-count" content="15"/><link rel="preload" href="/_next/static/css/391bd506cb4d42413536.css" as="style"/><link rel="stylesheet" href="/_next/static/css/391bd506cb4d42413536.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="/_next/static/chunks/webpack-c2a2190d4093451704a6.js" defer=""></script><script src="/_next/static/chunks/main-40881ee2de3c2707334e.js" defer=""></script><script src="/_next/static/chunks/pages/_app-4404d46dc88f0ccc95b7.js" defer=""></script><script src="/_next/static/chunks/framework-0673b3d96dcb10fbf769.js" defer=""></script><script src="/_next/static/chunks/96-9fc9f744aa350267d3f4.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-829ddae4ae03fa5c2402.js" defer=""></script><script src="/_next/static/RwfuAidZPCCDIEqLlNcW1/_buildManifest.js" defer=""></script><script src="/_next/static/RwfuAidZPCCDIEqLlNcW1/_ssgManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap">@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuGKYMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuFuYMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body class="antialiased text-black bg-white dark:bg-gray-900 dark:text-white"><div id="__next"><div class="max-w-3xl px-4 mx-auto sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex flex-col justify-between h-screen"><header class="flex items-center justify-between py-10"><div><a aria-label="Bruno Valenga Blog" href="/"><div class="flex items-center justify-between"><div class="mr-3"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="344.564 330.278 111.737 91.218" width="53.87" height="43.61"><defs><linearGradient id="logo_svg__b" gradientUnits="userSpaceOnUse" x1="420.97" y1="331.28" x2="420.97" y2="418.5"><stop offset="0%" stop-color="#06b6d4"></stop><stop offset="100%" stop-color="#67e8f9"></stop></linearGradient><linearGradient id="logo_svg__d" gradientUnits="userSpaceOnUse" x1="377.89" y1="331.28" x2="377.89" y2="418.5"><stop offset="0%" stop-color="#06b6d4"></stop><stop offset="100%" stop-color="#67e8f9"></stop></linearGradient><path d="M453.3 331.28v28.57l-64.66 58.65v-30.08l64.66-57.14z" id="logo_svg__a"></path><path d="M410.23 331.28v28.57l-64.67 58.65v-30.08l64.67-57.14z" id="logo_svg__c"></path></defs><use xlink:href="#logo_svg__a" fill="url(#logo_svg__b)"></use><use xlink:href="#logo_svg__c" fill="url(#logo_svg__d)"></use></svg></div><div class="hidden h-6 text-2xl font-semibold sm:block">Bruno Valenga</div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 sm:p-4 dark:text-gray-100" href="/blog">Blog</a><a class="p-1 font-medium text-gray-900 sm:p-4 dark:text-gray-100" href="/tags">Tags</a><a class="p-1 font-medium text-gray-900 sm:p-4 dark:text-gray-100" href="/about">About</a></div><button aria-label="Toggle Dark Mode" type="button" class="w-8 h-8 p-1 ml-1 mr-1 rounded sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button type="button" class="w-8 h-8 ml-1 mr-1 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed w-full h-full top-24 right-0 bg-gray-200 dark:bg-gray-800 opacity-95 z-10 transform ease-in-out duration-300 translate-x-full"><button type="button" aria-label="toggle modal" class="fixed w-full h-full cursor-auto focus:outline-none"></button><nav class="fixed h-full mt-8"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">Blog</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/about">About</a></div></nav></div></div></div></header><main class="mb-auto"><div class="max-w-3xl px-4 mx-auto sm:px-6 xl:max-w-5xl xl:px-0"><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2020-05-20">Wednesday, May 20, 2020</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">Using Multiple Buckets AWS Amplify</h1></div></div></header><div class="pb-8 divide-y divide-gray-200 xl:divide-y-0 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6" style="grid-template-rows:auto 1fr"><dl class="pt-6 pb-10 xl:pt-11 xl:border-b xl:border-gray-200 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex justify-center space-x-8 xl:block sm:space-x-12 xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><img src="/static/images/avatar.jpg" width="38px" height="38px" alt="avatar" class="w-10 h-10 rounded-full"/><dl class="text-sm font-medium leading-5 whitespace-nowrap"><dt class="sr-only">Name</dt><dd class="text-gray-900 dark:text-gray-100">Bruno Valenga</dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:pb-0 xl:col-span-3 xl:row-span-2"><div class="pt-10 pb-8 prose dark:prose-dark max-w-none"><h1 id="using-multiple-buckets-aws-amplify"><a href="#using-multiple-buckets-aws-amplify" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Using Multiple Buckets AWS Amplify</h1>
<p>AWS Amplify Logo</p>
<p>From the Amplify documentation, we can consider that AWS Amplify is a development platform for building secure, scalable mobile and web applications. It makes it easy for you to authenticate users, securely store data and user metadata, authorize selective access to data, integrate machine learning, analyze application metrics, and execute server-side code. Amplify covers the complete mobile application development workflow from version control, code testing, to production deployment, and it easily scales with your business from thousands of users to tens of millions.</p>
<p>Amplify provides a set of features such as Auth, Analytics, API (GraphQL and REST), Interactions, Predictions, PubSub, Storage, Push Notifications, and XR that enable you to build feature-rich serverless applications powered by AWS services.</p>
<p>One of these amazing features is the <a target="_blank" rel="noopener noreferrer" href="https://docs.amplify.aws/lib/storage/getting-started/q/platform/js">**Storage</a>** one where Amplify use S3 Service to store our files.</p>
<p>From the <a target="_blank" rel="noopener noreferrer" href="https://docs.amplify.aws/lib/storage/getting-started/q/platform/js#manual-setup-import-storage-bucket">Amplify documentation</a>, we can easily set up the <strong>Storage</strong> module just doing the setup and insert the bucket on the <strong>aws-exports.js,</strong> or we can only use the <a target="_blank" rel="noopener noreferrer" href="https://docs.amplify.aws/lib/storage/getting-started/q/platform/js#automated-setup-create-storage-bucket">Amplify CLI</a>.</p>
<p><img src="https://cdn-images-1.medium.com/max/4096/1*TGFrvwUSuB8SMuaFh8ru9w.png" alt="https://docs.amplify.aws/lib/storage/getting-started/q/platform/js#manual-setup-import-storage-bucket"/><em><a target="_blank" rel="noopener noreferrer" href="https://docs.amplify.aws/lib/storage/getting-started/q/platform/js#manual-setup-import-storage-bucket">https://docs.amplify.aws/lib/storage/getting-started/q/platform/js#manual-setup-import-storage-bucket</a></em></p>
<p>As we can see, the documentation shows that the bucket name is mandatory and we can only define one.</p>
<p>So if we want to use the Amplify modules to upload or download files from more than one bucket we start facing some problems because we have just one bucket configured.</p>
<p><img src="https://cdn-images-1.medium.com/max/5384/1*OaX89AxEY1lWu6DGeUTLcw.png" alt="https://docs.amplify.aws/lib/storage/upload/q/platform/js"/><em><a target="_blank" rel="noopener noreferrer" href="https://docs.amplify.aws/lib/storage/upload/q/platform/js">https://docs.amplify.aws/lib/storage/upload/q/platform/js</a></em></p>
<p>I started reading the Amplify documentation to find a way to solve this problem. I couldn’t find any way that could help me use multiple buckets in the same application.</p>
<p>After spending a few hours looking inside the source code of the library, I found a config object that is passed to the function and exposes several parameters interpreted by the provider. One of those parameters is the bucket.</p>
<p><img src="https://cdn-images-1.medium.com/max/7536/1*6HmaJE2CULUp18LMsf69yA.png" alt="https://github.com/aws-amplify/amplify-js/blob/master/packages/storage/src/Storage.ts"/><em><a target="_blank" rel="noopener noreferrer" href="https://github.com/aws-amplify/amplify-js/blob/master/packages/storage/src/Storage.ts">https://github.com/aws-amplify/amplify-js/blob/master/packages/storage/src/Storage.ts</a></em></p>
<p>The S3 Provider that Amplify is using has many other parameters that you can use and is not provided by the documentation. If you want to check it out, you can find all the parameters in the <a target="_blank" rel="noopener noreferrer" href="https://github.com/aws-amplify/amplify-js/blob/master/packages/storage/src/providers/AWSS3Provider.ts">source code</a>.</p>
<p>After adding the object and entering the bucket name I was able to upload it to my custom bucket.</p>
<p><img src="https://cdn-images-1.medium.com/max/5384/1*PVFMki2IqoMuCJ7GhkPpug.png" alt=""/></p>
<blockquote>
<p>If you created your bucket directly on the console, you might need to enter some security policies. You can follow the <a target="_blank" rel="noopener noreferrer" href="https://docs.amplify.aws/lib/storage/getting-started/q/platform/js#using-amazon-s3">official documentation</a> to do this.</p>
</blockquote>
<p>I don’t know why the official Amplify documentation did not cover, I hope that in the future they will be able to tidy up the documentation and make it more complete so that people who are starting to use it have easier setup. I hope you enjoyed it, leave your comment below if you have any questions.</p>
<p>Cheers.</p></div><div class="pt-6 pb-6 text-sm text-gray-700 dark:text-gray-300"><a target="_blank" rel="noopener noreferrer" href="https://github.com/brunodasilvalenga/brunodasilvalenga.github.io/blob/master/data/blog/using-multiple-buckets-aws-amplify.mdx">View on GitHub</a></div></div><footer><div class="text-sm font-medium leading-5 divide-gray-200 xl:divide-y dark:divide-gray-700 xl:col-start-1 xl:row-start-2"><div class="py-4 xl:py-8"><h2 class="text-xs tracking-wide text-gray-500 uppercase dark:text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/amplify">amplify</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/s3-bucket">s3-bucket</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/aws">aws</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs tracking-wide text-gray-500 uppercase dark:text-gray-400">Previous Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/multi-developer-environments-on-aws-using-gitlab-terraform-serverless-react">Multi developer environments on AWS using Gitlab + Terraform + Serverless + React</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog">← Back to the blog</a></div></footer></div></div></article></div></main><footer><div class="flex flex-col items-center mt-16"><div class="flex mb-3 space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:brunodasilvalenga@gmail.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-700 dark:text-gray-200 hover:text-blue-500 dark:hover:text-blue-400 h-6 w-6"><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/brunodasilvalenga"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 dark:text-gray-200 hover:text-blue-500 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://instagram.com/brunodasilvalenga"><span class="sr-only">instagram</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 dark:text-gray-200 hover:text-blue-500 dark:hover:text-blue-400 h-6 w-6"><path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913a5.885 5.885 0 001.384 2.126A5.868 5.868 0 004.14 23.37c.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558a5.898 5.898 0 002.126-1.384 5.86 5.86 0 001.384-2.126c.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913a5.89 5.89 0 00-1.384-2.126A5.847 5.847 0 0019.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227a3.81 3.81 0 01-.899 1.382 3.744 3.744 0 01-1.38.896c-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421a3.716 3.716 0 01-1.379-.899 3.644 3.644 0 01-.9-1.38c-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678a6.162 6.162 0 100 12.324 6.162 6.162 0 100-12.324zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405a1.441 1.441 0 01-2.88 0 1.44 1.44 0 012.88 0z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://dev.to/brunodasilvalenga"><span class="sr-only">devdotto</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 dark:text-gray-200 hover:text-blue-500 dark:hover:text-blue-400 h-6 w-6"><path d="M7.42 10.05c-.18-.16-.46-.23-.84-.23H6l.02 2.44.04 2.45.56-.02c.41 0 .63-.07.83-.26.24-.24.26-.36.26-2.2 0-1.91-.02-1.96-.29-2.18zM0 4.94v14.12h24V4.94H0zM8.56 15.3c-.44.58-1.06.77-2.53.77H4.71V8.53h1.4c1.67 0 2.16.18 2.6.9.27.43.29.6.32 2.57.05 2.23-.02 2.73-.47 3.3zm5.09-5.47h-2.47v1.77h1.52v1.28l-.72.04-.75.03v1.77l1.22.03 1.2.04v1.28h-1.6c-1.53 0-1.6-.01-1.87-.3l-.3-.28v-3.16c0-3.02.01-3.18.25-3.48.23-.31.25-.31 1.88-.31h1.64v1.3zm4.68 5.45c-.17.43-.64.79-1 .79-.18 0-.45-.15-.67-.39-.32-.32-.45-.63-.82-2.08l-.9-3.39-.45-1.67h.76c.4 0 .75.02.75.05 0 .06 1.16 4.54 1.26 4.83.04.15.32-.7.73-2.3l.66-2.52.74-.04c.4-.02.73 0 .73.04 0 .14-1.67 6.38-1.8 6.68z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://medium.com/@brunodasilvalenga"><span class="sr-only">medium</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 dark:text-gray-200 hover:text-blue-500 dark:hover:text-blue-400 h-6 w-6"><path d="M13.54 12a6.8 6.8 0 01-6.77 6.82A6.8 6.8 0 010 12a6.8 6.8 0 016.77-6.82A6.8 6.8 0 0113.54 12zm7.42 0c0 3.54-1.51 6.42-3.38 6.42-1.87 0-3.39-2.88-3.39-6.42s1.52-6.42 3.39-6.42 3.38 2.88 3.38 6.42M24 12c0 3.17-.53 5.75-1.19 5.75-.66 0-1.19-2.58-1.19-5.75s.53-5.75 1.19-5.75C23.47 6.25 24 8.83 24 12z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/bruno-da-silva-valenga"><span class="sr-only">linkedin</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 dark:text-gray-200 hover:text-blue-500 dark:hover:text-blue-400 h-6 w-6"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a></div><div class="flex mb-2 space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>Bruno da Silva Valenga</div><div> • </div><div>© 2021</div><div> • </div><a href="/">Blog</a></div><div class="mb-8 text-sm text-gray-500 dark:text-gray-400"><a target="_blank" rel="noopener noreferrer" href="https://github.com/timlrx/tailwind-nextjs-starter-blog">Tailwind Nextjs Theme</a></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":"var Component=(()=\u003e{var c=Object.create;var i=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var d=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty;var n=a=\u003ei(a,\"__esModule\",{value:!0});var u=(a,e)=\u003e()=\u003e(e||a((e={exports:{}}).exports,e),e.exports),f=(a,e)=\u003e{n(a);for(var s in e)i(a,s,{get:e[s],enumerable:!0})},g=(a,e,s)=\u003e{if(e\u0026\u0026typeof e==\"object\"||typeof e==\"function\")for(let o of m(e))!h.call(a,o)\u0026\u0026o!==\"default\"\u0026\u0026i(a,o,{get:()=\u003ee[o],enumerable:!(s=p(e,o))||s.enumerable});return a},y=a=\u003eg(n(i(a!=null?c(d(a)):{},\"default\",a\u0026\u0026a.__esModule\u0026\u0026\"default\"in a?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a);var l=u((v,r)=\u003e{r.exports=_jsx_runtime});var A={};f(A,{default:()=\u003ek,frontmatter:()=\u003eb});var t=y(l()),b={title:\"Using Multiple Buckets AWS Amplify\",date:\"2020-05-20\",tags:[\"amplify\",\"s3-bucket\",\"aws\"],draft:!1,summary:\"From the Amplify documentation, we can consider that AWS Amplify is a development platform for building secure, scalable mobile and web\\u2026\"};function w(a){let e=Object.assign({h1:\"h1\",a:\"a\",span:\"span\",p:\"p\",strong:\"strong\",img:\"img\",em:\"em\",blockquote:\"blockquote\"},a.components),{wrapper:s}=e,o=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.h1,{id:\"using-multiple-buckets-aws-amplify\",children:[(0,t.jsx)(e.a,{href:\"#using-multiple-buckets-aws-amplify\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,t.jsx)(e.span,{className:\"icon icon-link\"})}),\"Using Multiple Buckets AWS Amplify\"]}),`\n`,(0,t.jsx)(e.p,{children:\"AWS Amplify Logo\"}),`\n`,(0,t.jsx)(e.p,{children:\"From the Amplify documentation, we can consider that AWS Amplify is a development platform for building secure, scalable mobile and web applications. It makes it easy for you to authenticate users, securely store data and user metadata, authorize selective access to data, integrate machine learning, analyze application metrics, and execute server-side code. Amplify covers the complete mobile application development workflow from version control, code testing, to production deployment, and it easily scales with your business from thousands of users to tens of millions.\"}),`\n`,(0,t.jsx)(e.p,{children:\"Amplify provides a set of features such as Auth, Analytics, API (GraphQL and REST), Interactions, Predictions, PubSub, Storage, Push Notifications, and XR that enable you to build feature-rich serverless applications powered by AWS services.\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"One of these amazing features is the \",(0,t.jsx)(e.a,{href:\"https://docs.amplify.aws/lib/storage/getting-started/q/platform/js\",children:\"**Storage\"}),\"** one where Amplify use S3 Service to store our files.\"]}),`\n`,(0,t.jsxs)(e.p,{children:[\"From the \",(0,t.jsx)(e.a,{href:\"https://docs.amplify.aws/lib/storage/getting-started/q/platform/js#manual-setup-import-storage-bucket\",children:\"Amplify documentation\"}),\", we can easily set up the \",(0,t.jsx)(e.strong,{children:\"Storage\"}),\" module just doing the setup and insert the bucket on the \",(0,t.jsx)(e.strong,{children:\"aws-exports.js,\"}),\" or we can only use the \",(0,t.jsx)(e.a,{href:\"https://docs.amplify.aws/lib/storage/getting-started/q/platform/js#automated-setup-create-storage-bucket\",children:\"Amplify CLI\"}),\".\"]}),`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/4096/1*TGFrvwUSuB8SMuaFh8ru9w.png\",alt:\"https://docs.amplify.aws/lib/storage/getting-started/q/platform/js#manual-setup-import-storage-bucket\"}),(0,t.jsx)(e.em,{children:(0,t.jsx)(e.a,{href:\"https://docs.amplify.aws/lib/storage/getting-started/q/platform/js#manual-setup-import-storage-bucket\",children:\"https://docs.amplify.aws/lib/storage/getting-started/q/platform/js#manual-setup-import-storage-bucket\"})})]}),`\n`,(0,t.jsx)(e.p,{children:\"As we can see, the documentation shows that the bucket name is mandatory and we can only define one.\"}),`\n`,(0,t.jsx)(e.p,{children:\"So if we want to use the Amplify modules to upload or download files from more than one bucket we start facing some problems because we have just one bucket configured.\"}),`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/5384/1*OaX89AxEY1lWu6DGeUTLcw.png\",alt:\"https://docs.amplify.aws/lib/storage/upload/q/platform/js\"}),(0,t.jsx)(e.em,{children:(0,t.jsx)(e.a,{href:\"https://docs.amplify.aws/lib/storage/upload/q/platform/js\",children:\"https://docs.amplify.aws/lib/storage/upload/q/platform/js\"})})]}),`\n`,(0,t.jsx)(e.p,{children:\"I started reading the Amplify documentation to find a way to solve this problem. I couldn\\u2019t find any way that could help me use multiple buckets in the same application.\"}),`\n`,(0,t.jsx)(e.p,{children:\"After spending a few hours looking inside the source code of the library, I found a config object that is passed to the function and exposes several parameters interpreted by the provider. One of those parameters is the bucket.\"}),`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/7536/1*6HmaJE2CULUp18LMsf69yA.png\",alt:\"https://github.com/aws-amplify/amplify-js/blob/master/packages/storage/src/Storage.ts\"}),(0,t.jsx)(e.em,{children:(0,t.jsx)(e.a,{href:\"https://github.com/aws-amplify/amplify-js/blob/master/packages/storage/src/Storage.ts\",children:\"https://github.com/aws-amplify/amplify-js/blob/master/packages/storage/src/Storage.ts\"})})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"The S3 Provider that Amplify is using has many other parameters that you can use and is not provided by the documentation. If you want to check it out, you can find all the parameters in the \",(0,t.jsx)(e.a,{href:\"https://github.com/aws-amplify/amplify-js/blob/master/packages/storage/src/providers/AWSS3Provider.ts\",children:\"source code\"}),\".\"]}),`\n`,(0,t.jsx)(e.p,{children:\"After adding the object and entering the bucket name I was able to upload it to my custom bucket.\"}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/5384/1*PVFMki2IqoMuCJ7GhkPpug.png\",alt:\"\"})}),`\n`,(0,t.jsxs)(e.blockquote,{children:[`\n`,(0,t.jsxs)(e.p,{children:[\"If you created your bucket directly on the console, you might need to enter some security policies. You can follow the \",(0,t.jsx)(e.a,{href:\"https://docs.amplify.aws/lib/storage/getting-started/q/platform/js#using-amazon-s3\",children:\"official documentation\"}),\" to do this.\"]}),`\n`]}),`\n`,(0,t.jsx)(e.p,{children:\"I don\\u2019t know why the official Amplify documentation did not cover, I hope that in the future they will be able to tidy up the documentation and make it more complete so that people who are starting to use it have easier setup. I hope you enjoyed it, leave your comment below if you have any questions.\"}),`\n`,(0,t.jsx)(e.p,{children:\"Cheers.\"})]});return s?(0,t.jsx)(s,Object.assign({},a,{children:o})):o}var k=w;return A;})();\n;return Component.default;","frontMatter":{"readingTime":{"text":"3 min read","minutes":2.47,"time":148200,"words":494},"slug":"using-multiple-buckets-aws-amplify","fileName":"using-multiple-buckets-aws-amplify.mdx","title":"Using Multiple Buckets AWS Amplify","date":"2020-05-20","tags":["amplify","s3-bucket","aws"],"draft":false,"summary":"From the Amplify documentation, we can consider that AWS Amplify is a development platform for building secure, scalable mobile and web…"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.605,"time":36300,"words":121},"slug":["default"],"fileName":"default.md","name":"Bruno Valenga","avatar":"/static/images/avatar.jpg","occupation":"DevOps Engineer","company":"DNX Solutions","email":"brunodasilvalenga@gmail.com","linkedin":"https://www.linkedin.com/in/bruno-da-silva-valenga","github":"https://github.com/brunodasilvalenga","instagram":"https://instagram.com/brunodasilvalenga","devdotto":"https://dev.to/brunodasilvalenga","medium":"https://medium.com/@brunodasilvalenga"}],"prev":{"title":"Multi developer environments on AWS using Gitlab + Terraform + Serverless + React","date":"2020-05-06","tags":["serverless","gitlab","terraform","react","aws"],"draft":false,"summary":"How you can deploy your applications and separate them by developer using Terraform and Gitlab CI.","slug":"multi-developer-environments-on-aws-using-gitlab-terraform-serverless-react"},"next":null},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["using-multiple-buckets-aws-amplify"]},"buildId":"RwfuAidZPCCDIEqLlNcW1","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>